# AI批量生图工具 - 完美破解指南

## 🎯 你的机器码
```
8ee8d931c26f457bac19512cde21c8e3
```

## 🔑 你的授权码
```
DEMO-8ee8d931
```

---

## 🚀 破解步骤（按 trae 的方法）

### 步骤 1: 安装依赖
```bash
pip install fastapi uvicorn
```

### 步骤 2: 启动本地授权服务器
```bash
# 在 PowerShell 中执行
cd d:/github/salary/lazy_hack
python mock_license_server.py
```

服务器会在 `http://127.0.0.1:5555` 启动

### 步骤 3: 修改 hosts 文件（劫持授权服务器）

编辑 `C:\Windows\System32\drivers\etc\hosts`，添加：
```
127.0.0.1 101.35.94.153
```

这样软件访问 `101.35.94.153:5555` 时会被重定向到本地服务器。

### 步骤 4: 启动软件
```bash
# 在另一个 PowerShell 窗口
cd d:/github/salary/lazy_hack
$env:AI_TOOL_BACKEND_URL="http://127.0.0.1:5555"
./AI批量生图工具_2.0.14.exe
```

或者直接双击运行 `启动破解版.bat`

### 步骤 5: 激活软件

1. 软件启动后显示机器码
2. 输入授权码：`DEMO-8ee8d931`
3. 点击"激活"按钮
4. 成功！授权有效期 90 天

---

## ⚡ 一键破解方式

**最简单**: 双击运行 `启动破解版.bat`

这个脚本会自动：
1. 修改 hosts 文件
2. 启动本地授权服务器
3. 设置环境变量
4. 启动软件
5. 显示你的授权码

---

## 🔍 工作原理

### 1. 本地授权服务器
`mock_license_server.py` 模拟真实授权服务器，提供两个接口：

**激活接口** (`/activate`):
- 接受机器码和授权码
- 验证授权码格式：`DEMO-<机器码前8位>`
- 返回 90 天有效期

**验证接口** (`/validate`):
- 接受机器码
- 自动返回已激活状态
- 返回 90 天有效期

### 2. 劫持授权服务器
通过修改 hosts 文件：
```
127.0.0.1 101.35.94.153
```

让软件访问的真实服务器 `http://101.35.94.153:5555` 被重定向到本地 `http://127.0.0.1:5555`

### 3. 环境变量（可选）
```bash
AI_TOOL_BACKEND_URL=http://127.0.0.1:5555
```

如果软件支持这个环境变量，可以直接指定后端地址，无需修改 hosts。

---

## 📋 授权码规则

根据 trae 的代码，授权码格式为：
```
DEMO-<机器码前8位>
```

你的机器码：`8ee8d931c26f457bac19512cde21c8e3`  
你的授权码：`DEMO-8ee8d931`

---

## 🛠️ 故障排查

### 问题1: 服务器启动失败
```bash
# 检查端口占用
netstat -ano | findstr :5555

# 更换端口（修改 mock_license_server.py）
uvicorn.run(app, host="127.0.0.1", port=6666)
```

### 问题2: 软件仍然连接到真实服务器
```bash
# 确认 hosts 文件已修改
type C:\Windows\System32\drivers\etc\hosts

# 清除 DNS 缓存
ipconfig /flushdns
```

### 问题3: 授权码无效
- 确保授权码格式正确：`DEMO-8ee8d931`
- 查看本地服务器日志，确认请求到达
- 机器码可能不同，以软件显示的为准

---

## 🎉 预期结果

成功后：
1. 软件显示"激活成功！"
2. 设置页面显示授权有效期（90天后）
3. 可以正常使用所有功能

---

## 🔥 终极方案（如果上述都不行）

如果软件不支持环境变量 `AI_TOOL_BACKEND_URL`，则：

1. 保持本地服务器运行
2. 修改 hosts 劫持授权服务器
3. 使用授权码 `DEMO-8ee8d931` 激活

本地服务器会自动通过所有验证请求！
